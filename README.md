# quoridor
Инструкция по установке.
1) Поставить кокос
2) Скачать фотон отсюда https://www.photonengine.com/Download/Photon-AndroidNDK-Sdk_v4-0-4-1.zip и разархивируйте его в папку, которая находится на том же уровне, что и папка с репозиторием (желательно)
3) Воспользоваться командой cocos-genlibs для компиляции библиотек кокоса, которые потом просто будут линковаться к проекту, а не собираться каждый раз заново.
4) Изменить мэйкфайл андроида (для IOS не разбирался, что-то аналогичное) для того, чтобы он линковал эти библиотеки и библиотеки фотона. Нас интересует файл proj.android/jni/Android.mk. Там уже все, как надо,
уже все ок, кроме переменных MY_PHOTON_PATH и строчки:

$(call import-add-path, /home/grin/bin/cocos2d-x-3.8.1/cocos/prebuilt-mk)

нужно те пути, которые указаны, переделать в пути к фотону и кокосу на вашем компе. Постараюсь переделать так, чтобы использовались относительные пути и переменные среды, но пока так.
Этот пункт нужно делать каждый раз, когда вы делаете pull с сервера после того, как кто-то другой закоммитил. Это убого((

5) Возможно, даже после этого у вас будут проблемы с компиляцией. У меня кокос генерил битые мэйкфайлы, которые используются системой сборки. Вот пример:

Файл /home/grin/bin/cocos2d-x-3.8.1/external/flatbuffers/Android.mk:

LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := cocos_flatbuffers_static

LOCAL_MODULE_FILENAME := flatbuffers

#ЗДЕСЬ КАКОЙ-ТО ШЛАК!!!!!!!!! ЕГО НАДО УДАЛИТЬ

LOCAL_SRC_FILES := \
flatc.cpp \
idl_gen_cpp.cpp \
idl_gen_fbs.cpp \
idl_gen_general.cpp \
idl_gen_go.cpp \
idl_gen_text.cpp \
idl_parser.cpp

LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/..

LOCAL_C_INCLUDES := $(LOCAL_PATH)/..\

LOCAL_CPPFLAGS += -fexceptions
                                 
include $(BUILD_STATIC_LIBRARY)

Если вместо предложения про шлак есть что-то, то это надо удалить. Если такое вознинет, лучше спросите у меня.

6) После всех этих танцев, в корне проекта (quoridor/) дайте команду cocos compile -p android. Для вызова спраки можно cocos -h, там написано, как задавать разные параметры компиляции.
7) Для компиляции под эмулятор андроида надо в файле proj.android/jni/Application.mk добавить в начало:APP_ABI := x86.
8) Желательно не добавлять библиотеки и бинарники в репозиторий. Думаю, что основной код у нас будет лежать в папке Classes. Специфические вещи для андроида proj.android (файлы
эклипса, других ИДЕ), а для IOS в proj.ios.
9) Если будете что-то делать и комитить, желательно создавать свою ветку в гите. Делается это просто git checkout -b 'имя ветки'. Далее, когда мы договоримся, все посмотрим, будем мёржить.
10) Сейчас там лежит код программы, которая позволяет подгоннектиться двум клиетнам через кокос и увидеть в логе, как появиляется уведомление о том, что другой ткнул в экран. Не советую
пытаться найти особо стараться запустить. Главное, чтобы оно компилилось и запускалось на устройстве.


